{"ast":null,"code":"import _classCallCheck from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _get from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{updateState}from'../landing/Structure';import KalenderPopup from'./KalenderPopup';import'../../css/kalender.css';import fetchPruefungen from'../../js/fetch';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var KalenderContent=/*#__PURE__*/function(_React$Component){_inherits(KalenderContent,_React$Component);var _super=_createSuper(KalenderContent);function KalenderContent(){var _this;_classCallCheck(this,KalenderContent);_this=_super.call(this);_this.state={error:null,isLoaded:true,pruefungen:[],aktiveFilter:[],pruefungPopup:false,searchItem:'',pruefungenInfos:[],calendar:[],date:new Date(),infos:[]};updateState=updateState.bind(_assertThisInitialized(_this));//updateState = () => {updateState(); renderCalendar(this.state.pruefungenInfos, this.state.date)}\nreturn _this;}_createClass(KalenderContent,[{key:\"setState\",value:function setState(state){_get(_getPrototypeOf(KalenderContent.prototype),\"setState\",this).call(this,state);this.state.calendar=this.renderCalendar(this.state.pruefungenInfos,this.state.date);}},{key:\"renderCalendar\",value:function renderCalendar(infos,date){var _this2=this;var month=date.getMonth();var lastDay=new Date(date.getFullYear(),date.getMonth()+1,0).getDate();date.setDate(1);var firstDayIndex=date.getDay();var lastMonthDays=new Date(date.getFullYear(),date.getMonth(),0).getDate();var months=[\"Januar\",\"Februar\",\"März\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"];document.querySelector(\"#cur_month\").innerHTML=months[month];document.querySelector(\"#cur_year\").innerHTML=\"<p>\"+date.getFullYear()+\"</p>\";var days=[];var i=1;var week=[];var event=[];for(var x=firstDayIndex-1;x!==0;x--){if(x===-1){x=6;}week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"other_month\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:lastMonthDays-x+1}),/*#__PURE__*/_jsx(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+lastMonthDays-x+1+\"m\"+date.getMonth()-1,children:\"  \"})]}));i++;}var _loop=function _loop(y){if(i%7===1){days.push(/*#__PURE__*/_jsx(\"tr\",{children:week}));week=[];}if(typeof infos[date.getMonth()*31+y]!==\"undefined\"){var _loop2=function _loop2(j){if(infos[date.getMonth()*31+y][j][0]===date.getFullYear()){event.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.togglePopup(infos[date.getMonth()*31+y][j]);},children:infos[date.getMonth()*31+y][j][1]}));}else{event=[];}};for(var j=0;j<infos[date.getMonth()*31+y].length;j++){_loop2(j);}}else{event=[];}if(y===new Date().getDate()&&date.getMonth()===new Date().getMonth()&&date.getFullYear()===new Date().getFullYear()){week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"today\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:y}),/*#__PURE__*/_jsxs(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+y+\"m\"+date.getMonth(),children:[\" \",event,\" \"]})]}));}else{week.push(/*#__PURE__*/_jsxs(\"td\",{class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:y}),/*#__PURE__*/_jsxs(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+y+\"m\"+date.getMonth(),children:[\" \",event,\" \"]})]}));}event=[];i++;};for(var y=1;y<=lastDay;y++){_loop(y);}for(var _y=1;!(i%7===1);_y++){week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"other_month\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:_y}),/*#__PURE__*/_jsx(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+_y+\"m\"+date.getMonth()+1,children:\"  \"})]}));i++;}days.push(/*#__PURE__*/_jsx(\"tr\",{id:\"oops\",children:week}));return days;}},{key:\"prevMonth\",value:function prevMonth(infos,date){date.setMonth(date.getMonth()-1);return this.renderCalendar(infos,date);}},{key:\"nextMonth\",value:function nextMonth(infos,date){date.setMonth(date.getMonth()+1);return this.renderCalendar(infos,date);}},{key:\"togglePopup\",value:function togglePopup(infos){this.setState({infos:infos,showPopup:!this.state.showPopup});}},{key:\"componentDidMount\",value:function componentDidMount(){fetchPruefungen(this);}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,isLoaded=_this$state.isLoaded,pruefungen=_this$state.pruefungen;if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else{var pruefungenHeader=[];var pruefungenInfos1=[];if(pruefungen[0]){var pruefungenKeys=Object.keys(pruefungen[0]);for(var i=1;i<pruefungenKeys.length;i++){pruefungenHeader.push(/*#__PURE__*/_jsx(\"td\",{style:{textTransform:\"capitalize\"},id:pruefungenKeys[i]+'_col_head',className:\"popup_cell\",children:/*#__PURE__*/_jsx(\"b\",{children:pruefungenKeys[i]})}));}for(var _i=0;_i<pruefungen.length;_i++){var pruefungenValues=Object.values(pruefungen[_i]);var filteredOut=false;var containsSearch=false;//console.log(pruefungen[i].datum);\nif(typeof pruefungen[_i].datum!=='undefined'&&!(pruefungen[_i].datum==null)){var pruefungDatum=new Date(pruefungen[_i].datum);for(var j=1;j<pruefungenValues.length;j++){if(typeof this.state.aktiveFilter[j]!=\"undefined\"&&this.state.aktiveFilter[j]!=pruefungenValues[j]){filteredOut=true;}if(pruefungenValues[j]==null){pruefungenValues[j]=\"\";}if(pruefungenValues[j].toString().toLowerCase().match(this.state.searchItem.toLocaleLowerCase())){containsSearch=true;}}if(!filteredOut&&containsSearch){var tag=pruefungDatum.getMonth()*31+pruefungDatum.getDate();if(typeof pruefungenInfos1[tag]===\"undefined\"){pruefungenInfos1[tag]=[];}var pruefungenInstance=[];for(var _j=1;_j<pruefungenKeys.length;_j++){//console.log(typeof(pruefungenValues[j]));\nif(pruefungenValues[_j]===''){pruefungenInstance.push(/*#__PURE__*/_jsx(\"td\",{className:\"popup_cell\",children:\"NA\"}));}else{pruefungenInstance.push(/*#__PURE__*/_jsx(\"td\",{className:\"popup_cell\",children:pruefungenValues[_j]}));}}var included=false;var includedAt=-1;for(var k=0;k<pruefungenInfos1[tag].length;k++){if(pruefungenInfos1[tag][k][1]===pruefungen[_i].name){included=true;includedAt=k;}}if(!included){pruefungenInfos1[tag].push([parseInt(pruefungDatum.getFullYear()),pruefungen[_i].name,[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{id:\"categorycontent\",children:pruefungenInstance})})]]);this.state.calendar=this.renderCalendar(this.state.pruefungenInfos,this.state.date);}else{pruefungenInfos1[tag][includedAt][2].push(/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{id:\"categorycontent\",children:pruefungenInstance})}));}}}}}//console.log(pruefungenInfos1[0]);\n//console.log(typeof(this.state.pruefungenInfos[0]))\nif(typeof this.state.pruefungenInfos[0]==='undefined'){this.state.pruefungenInfos=pruefungenInfos1;this.state.pruefungenInfos[0]=true;}else if(this.state.pruefungenInfos[0]){this.state.pruefungenInfos=pruefungenInfos1;this.setState();this.state.pruefungenInfos[0]=false;}else{this.state.pruefungenInfos=pruefungenInfos1;}//console.log(this.state.date);\n//console.log(this.state.pruefungenInfos);\n}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"table\",{id:\"month\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"prev\",onClick:function onClick(){_this3.state.calendar=_this3.prevMonth(_this3.state.pruefungenInfos,_this3.state.date)[0];updateState(_this3.state.aktiveFilter,_this3.state.searchItem);},children:\"\\u276E\"}),/*#__PURE__*/_jsx(\"td\",{id:\"cur_month\",children:\"A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"next\",onClick:function onClick(){_this3.state.calendar=_this3.nextMonth(_this3.state.pruefungenInfos,_this3.state.date)[0];updateState(_this3.state.aktiveFilter,_this3.state.searchItem);},children:\"\\u276F\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{id:\"cur_year\",children:/*#__PURE__*/_jsx(\"p\",{children:\"2022\"})}),/*#__PURE__*/_jsx(\"td\",{})]})]})}),/*#__PURE__*/_jsxs(\"table\",{id:\"calendar_table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Mo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Di\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mi\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Do\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fr\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"So\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{id:\"days\",children:this.state.calendar})]}),this.state.showPopup?/*#__PURE__*/_jsx(KalenderPopup,{categories:pruefungenHeader,infos:this.state.infos,closePopup:this.togglePopup.bind(this)}):null]});}}]);return KalenderContent;}(React.Component);export{KalenderContent as default};","map":{"version":3,"sources":["/home/malte/Documents/WT2-Projekt/koelender_git/koelender/frontend/src/components/kalender/KalenderContent.jsx"],"names":["React","updateState","KalenderPopup","fetchPruefungen","KalenderContent","state","error","isLoaded","pruefungen","aktiveFilter","pruefungPopup","searchItem","pruefungenInfos","calendar","date","Date","infos","bind","renderCalendar","month","getMonth","lastDay","getFullYear","getDate","setDate","firstDayIndex","getDay","lastMonthDays","months","document","querySelector","innerHTML","days","i","week","event","x","push","y","j","togglePopup","length","setMonth","setState","showPopup","message","pruefungenHeader","pruefungenInfos1","pruefungenKeys","Object","keys","textTransform","pruefungenValues","values","filteredOut","containsSearch","datum","pruefungDatum","toString","toLowerCase","match","toLocaleLowerCase","tag","pruefungenInstance","included","includedAt","k","name","parseInt","prevMonth","nextMonth","Component"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport { updateState } from '../landing/Structure';\nimport KalenderPopup from './KalenderPopup';\nimport '../../css/kalender.css';\nimport fetchPruefungen from '../../js/fetch';\n\n\n\n\nexport default class KalenderContent extends React.Component{\n\n\n    constructor() {\n        super();\n        this.state = {\n            error:null,\n            isLoaded:true,\n            pruefungen: [],\n            aktiveFilter: [],\n            pruefungPopup: false,\n            searchItem: '',\n            pruefungenInfos: [],\n            calendar: [],\n            date: new Date(),\n            infos:[]\n        };\n        updateState = updateState.bind(this);\n        //updateState = () => {updateState(); renderCalendar(this.state.pruefungenInfos, this.state.date)}\n    }\n\n    setState(state) {\n        super.setState(state);\n        this.state.calendar = this.renderCalendar(this.state.pruefungenInfos, this.state.date);\n    }\n\n\n\n\n\n\n    renderCalendar(infos, date) {\n    \n        const month = date.getMonth();\n        const lastDay = new Date(date.getFullYear(), date.getMonth()+1,0).getDate();\n    \n        date.setDate(1);\n        const firstDayIndex = date.getDay();\n        const lastMonthDays = new Date(date.getFullYear(), date.getMonth(),0).getDate();\n    \n        const months = [\n            \"Januar\",\n            \"Februar\",\n            \"März\",\n            \"April\",\n            \"Mai\",\n            \"Juni\",\n            \"Juli\",\n            \"August\",\n            \"September\",\n            \"Oktober\",\n            \"November\",\n            \"Dezember\"\n        ];\n    \n        document.querySelector(\"#cur_month\").innerHTML \n        = months[month];\n    \n        document.querySelector(\"#cur_year\").innerHTML \n        = \"<p>\" + date.getFullYear() + \"</p>\";\n    \n        let days = [];\n    \n        let i = 1;\n        let week = [];\n        let event = [];\n    \n    \n        for(let x=firstDayIndex-1; x!==0; x--) {\n            \n            if (x===-1) {\n                x=6;\n            }\n            week.push( <td id=\"other_month\" class=\"day\">\n                    <div id=\"date\">{lastMonthDays-x+1}</div>\n                    <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + lastMonthDays-x+1 + \"m\" + date.getMonth()-1}>  </div>\n                </td>);\n            i++;\n        }\n    \n        \n    \n        for(let y=1; y<=lastDay;y++) {\n            \n            \n            if (i%7 === 1) {\n                days.push(<tr>{week}</tr>);\n                week = [];\n            }\n            if(typeof(infos[date.getMonth()*31+y]) !== \"undefined\") {\n                for(let j = 0; j<infos[date.getMonth()*31+y].length; j++)\n                if (infos[date.getMonth()*31+y][j][0] === date.getFullYear()) {\n                    \n                    event.push(<div onClick={()=>{this.togglePopup(infos[date.getMonth()*31+y][j])}} >{infos[date.getMonth()*31+y][j][1]}</div>);\n                    \n                }\n                else {\n                    event = [];\n                }\n            }\n            else {\n                event = [];\n            }\n            if(y===new Date().getDate() && date.getMonth()===new Date().getMonth() && date.getFullYear() === new Date().getFullYear()) {\n                \n                week.push( <td id=\"today\" class=\"day\">\n                        <div id=\"date\">{y}</div>\n                        <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()}> {event} </div>\n                    </td>);\n            }\n            else {\n                week.push( <td class=\"day\">\n                        <div id=\"date\">{y}</div>\n                        <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()}> {event} </div>\n                    </td>);\n            }\n            event = [];\n            i++;\n        }\n        \n        for(let y=1; !(i%7 === 1);y++) {\n            \n            week.push( <td id=\"other_month\" class=\"day\">\n                    <div id=\"date\">{y}</div>\n                    <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()+1}>  </div>\n                </td>);\n            i++;\n        }\n        days.push( <tr id = \"oops\">{week}</tr>);\n\n        return(days);\n  \n    }\n    \n    prevMonth(infos, date){\n        date.setMonth(date.getMonth()-1);\n        return this.renderCalendar(infos, date);\n    }\n    \n    nextMonth(infos, date){\n        date.setMonth(date.getMonth()+1);\n        return this.renderCalendar(infos, date);\n    }\n    \n\n\n\n\n\n    \n\n    togglePopup(infos) {\n        this.setState({\n            infos: infos,\n            showPopup: !this.state.showPopup\n        });\n    }\n\n    componentDidMount() {\n        fetchPruefungen(this);\n    }\n\n    render() {\n\n\n        const { error, isLoaded, pruefungen} = this.state;\n        \n        if(error) {return <div>Error: {error.message}</div>}\n        else if(!isLoaded) {return <div>Loading...</div>}\n\n        else {\n\n            var pruefungenHeader = [];\n            var pruefungenInfos1 = [];\n\n            \n\n            if(pruefungen[0]){\n                var pruefungenKeys = Object.keys(pruefungen[0]);\n\n                for(let i = 1; i<pruefungenKeys.length; i++){\n                    \n                        pruefungenHeader.push(\n                        <td style = {{textTransform: \"capitalize\"}} \n                            id = {pruefungenKeys[i]+'_col_head'}\n                            className = \"popup_cell\">\n                                <b>{pruefungenKeys[i]}</b>\n                        </td>);\n                    \n                                    \n                }\n\n                for(let i = 0; i<pruefungen.length; i++) {\n                    \n                    let pruefungenValues = Object.values(pruefungen[i]);\n                    let filteredOut = false;\n                    let containsSearch = false\n                    //console.log(pruefungen[i].datum);\n                    \n\n                    if (typeof(pruefungen[i].datum)!=='undefined'&&\n                        !(pruefungen[i].datum == null)) {\n\n                        let pruefungDatum = new Date(pruefungen[i].datum);\n                        \n                        for(let j = 1; j<pruefungenValues.length; j++){\n                                                \n                            if(typeof(this.state.aktiveFilter[j])!=\"undefined\"&&this.state.aktiveFilter[j]!=pruefungenValues[j]){\n                                filteredOut = true;\n                            }\n                            if(pruefungenValues[j]==null){\n                                pruefungenValues[j]=\"\"\n                            }\n                            if(pruefungenValues[j].toString().toLowerCase().match(this.state.searchItem.toLocaleLowerCase())){\n                                containsSearch = true;\n                            }\n                        }\n                        \n                        if(!filteredOut&&containsSearch) {\n                            let tag = (pruefungDatum.getMonth())*31 + pruefungDatum.getDate();\n                            if (typeof(pruefungenInfos1[tag]) === \"undefined\") {\n                                pruefungenInfos1[tag] = [];\n                            }\n                            let pruefungenInstance = [];\n                            for (let j = 1; j<pruefungenKeys.length; j++){\n                                //console.log(typeof(pruefungenValues[j]));\n                                if (pruefungenValues[j]==='') {\n                                    pruefungenInstance.push(<td className=\"popup_cell\">NA</td>);\n                                }\n                                else {\n                                    pruefungenInstance.push(<td className=\"popup_cell\">{pruefungenValues[j]}</td>);\n                                }\n                            }\n                      \n                            let included = false;\n                            let includedAt = -1;\n                            for(let k = 0; k<pruefungenInfos1[tag].length; k++){\n                                if(pruefungenInfos1[tag][k][1] === pruefungen[i].name) {\n                                    included = true;\n                                    includedAt = k;\n                                }\n                            }\n\n                            if (!included){\n                                pruefungenInfos1[tag].push([parseInt(pruefungDatum.getFullYear()), pruefungen[i].name, [<tr><td id = \"categorycontent\">{pruefungenInstance}</td></tr>]]);\n                                this.state.calendar = this.renderCalendar(this.state.pruefungenInfos, this.state.date);\n                            }\n                            else {\n                                pruefungenInfos1[tag][includedAt][2].push(<tr><td id = \"categorycontent\">{pruefungenInstance}</td></tr>);\n                            }\n                           \n                        }\n                    }   \n                }\n            }  \n            \n\n\n            //console.log(pruefungenInfos1[0]);\n            //console.log(typeof(this.state.pruefungenInfos[0]))\n            if(typeof(this.state.pruefungenInfos[0]) === 'undefined') {\n                this.state.pruefungenInfos = pruefungenInfos1;\n                this.state.pruefungenInfos[0] = true;\n            }\n            else if(this.state.pruefungenInfos[0]){\n                this.state.pruefungenInfos = pruefungenInfos1;\n                this.setState();\n                this.state.pruefungenInfos[0] = false;\n            }\n            else{\n                this.state.pruefungenInfos = pruefungenInfos1;\n            }\n            //console.log(this.state.date);\n            //console.log(this.state.pruefungenInfos);\n            \n        }\n    \n        return(\n            <>\n            <table id = \"month\">\n                <tbody>\n                    <tr>\n                        <td className=\"prev\" onClick={()=>{\n                            this.state.calendar = this.prevMonth(this.state.pruefungenInfos, this.state.date)[0]; \n                            updateState(this.state.aktiveFilter, this.state.searchItem);\n                            }}>\n                        {'\\u276E'}\n                        </td>\n                        \n                        <td id = \"cur_month\">\n                            A\n                        </td>\n                        \n                        <td className=\"next\" onClick={()=>{\n                            this.state.calendar = this.nextMonth(this.state.pruefungenInfos, this.state.date)[0]; \n                            updateState(this.state.aktiveFilter, this.state.searchItem);\n                            }}>\n                            {'\\u276F'}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td id = \"cur_year\">\n                            <p>2022</p>\n                        </td>\n                        <td></td>\n                        \n                    </tr>\n                </tbody>\n            </table>\n            <table id = \"calendar_table\">\n                <thead>\n                    <tr>\n                        <th>Mo</th>\n                        <th>Di</th>\n                        <th>Mi</th>\n                        <th>Do</th>\n                        <th>Fr</th>\n                        <th>Sa</th>\n                        <th>So</th>\n                    </tr>\n                </thead>\n                <tbody id = \"days\">\n                    {this.state.calendar}\n                    {/*Hier wird der Kalender generiert*/}\n                    {/*ToDo: Füllen der content divs mit Terminen*/}\n                </tbody>\n\n            </table>\n\n\n            {this.state.showPopup ? \n            <KalenderPopup\n                categories={pruefungenHeader}\n                infos={this.state.infos}\n                closePopup={this.togglePopup.bind(this)}\n            />\n            : null\n            }\n\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}