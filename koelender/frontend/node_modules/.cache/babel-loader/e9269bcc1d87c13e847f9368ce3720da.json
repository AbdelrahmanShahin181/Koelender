{"ast":null,"code":"import _classCallCheck from\"C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{renderCalendar}from'../../js/kalender';//import {prevMonth, nextMonth, renderCalendar} from './KalenderDays';\nimport{updateState}from'./Kalender';import KalenderPopup from'./KalenderPopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var KalenderContent=/*#__PURE__*/function(_React$Component){_inherits(KalenderContent,_React$Component);var _super=_createSuper(KalenderContent);function KalenderContent(){var _this;_classCallCheck(this,KalenderContent);_this=_super.call(this);_this.state={error:null,isLoaded:true,pruefungen:[],aktiveFilter:[],pruefungPopup:false,searchItem:'',pruefungenInfos:[],calendar:[],date:\"\",infoName:\"\"};updateState=updateState.bind(_assertThisInitialized(_this));//updateState = () => {updateState(); renderCalendar(this.state.pruefungenInfos, this.state.date)}\nreturn _this;}_createClass(KalenderContent,[{key:\"renderCalendar\",value:function renderCalendar(infos,date){var _this2=this;//console.log(\"function renderCalendar started\");\n//console.log(typeof(infos));\n//console.log(infos[1]);\nvar month=date.getMonth();var lastDay=new Date(date.getFullYear(),date.getMonth()+1,0).getDate();date.setDate(1);var firstDayIndex=date.getDay();var lastMonthDays=new Date(date.getFullYear(),date.getMonth(),0).getDate();var months=[\"Januar\",\"Februar\",\"MÃ¤rz\",\"April\",\"Mai\",\"Juni\",\"Juli\",\"August\",\"September\",\"Oktober\",\"November\",\"Dezember\"];document.querySelector(\"#cur_month\").innerHTML=months[month];document.querySelector(\"#cur_year\").innerHTML=\"<p>\"+date.getFullYear()+\"</p>\";var days=[];var i=1;var week=[];var event=[];for(var x=firstDayIndex-1;x!==0;x--){if(x===-1){x=6;}week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"other_month\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:lastMonthDays-x+1}),/*#__PURE__*/_jsx(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+lastMonthDays-x+1+\"m\"+date.getMonth()-1,children:\"  \"})]}));i++;}var _loop=function _loop(y){if(i%7===1){days.push(/*#__PURE__*/_jsx(\"tr\",{children:week}));week=[];}if(typeof infos[date.getMonth()*31+y]!==\"undefined\"){var _loop2=function _loop2(j){if(infos[date.getMonth()*31+y][j][0]===date.getFullYear()){event.push(/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){_this2.togglePopup(infos[date.getMonth()*31+y][j][1]);},children:infos[date.getMonth()*31+y][j][1]}));}else{event=[];}};for(var j=0;j<infos[date.getMonth()*31+y].length;j++){_loop2(j);}}else{event=[];}if(y===new Date().getDate()&&date.getMonth()===new Date().getMonth()&&date.getFullYear()===new Date().getFullYear()){week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"today\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:y}),/*#__PURE__*/_jsxs(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+y+\"m\"+date.getMonth(),children:[\" \",event,\" \"]})]}));}else{week.push(/*#__PURE__*/_jsxs(\"td\",{class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:y}),/*#__PURE__*/_jsxs(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+y+\"m\"+date.getMonth(),children:[\" \",event,\" \"]})]}));}event=[];i++;};for(var y=1;y<=lastDay;y++){_loop(y);}for(var _y=1;!(i%7===1);_y++){week.push(/*#__PURE__*/_jsxs(\"td\",{id:\"other_month\",class:\"day\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"date\",children:_y}),/*#__PURE__*/_jsx(\"div\",{id:\"content\",class:\"y\"+date.getFullYear()+\"d\"+_y+\"m\"+date.getMonth()+1,children:\"  \"})]}));i++;}days.push(/*#__PURE__*/_jsx(\"tr\",{id:\"oops\",children:week}));//console.log(typeof(days));\nreturn[days,date];//monthDays.innerHTML = days;\n}},{key:\"prevMonth\",value:function prevMonth(infos,date){//console.log(date.getMonth());\ndate.setMonth(date.getMonth()-1);return this.renderCalendar(infos,date);}},{key:\"nextMonth\",value:function nextMonth(infos,date){date.setMonth(date.getMonth()+1);return this.renderCalendar(infos,date);}},{key:\"togglePopup\",value:function togglePopup(name){this.setState({infoName:name,showPopup:!this.state.showPopup});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.setState({calendar:this.renderCalendar(this.state.pruefungenInfos,this.state.date)[0]});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;//console.log(typeof(this.state.pruefungenInfos));\n//console.log(this.state.pruefungenInfos[0]);\nif(this.state.date===\"\"){this.state.date=new Date();}fetch(\"http://localhost:8000/api/liste/\",{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(result){_this3.setState({isLoaded:true,pruefungen:result,calendar:_this3.renderCalendar(_this3.state.pruefungenInfos,_this3.state.date)[0]});},function(error){_this3.setState({isLoaded:true,error:error});});}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,error=_this$state.error,isLoaded=_this$state.isLoaded,pruefungen=_this$state.pruefungen;if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}else if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else{var pruefungenHeader=[];var pruefungenInfos1=[];if(pruefungen[0]){var pruefungenKeys=Object.keys(pruefungen[0]);for(var i=1;i<pruefungenKeys.length;i++){pruefungenHeader.push(/*#__PURE__*/_jsx(\"td\",{style:{textTransform:\"capitalize\"},id:pruefungenKeys[i]+'_col_head',children:/*#__PURE__*/_jsx(\"b\",{children:pruefungenKeys[i]})}));}for(var _i=0;_i<pruefungen.length;_i++){var pruefungenValues=Object.values(pruefungen[_i]);var filteredOut=false;var containsSearch=false;if(!(pruefungenValues[5]==null)){var pruefungDatum=pruefungenValues[5].split('-');pruefungDatum[1]=parseInt(pruefungDatum[1]);if(typeof pruefungDatum[2]==='string'){pruefungDatum[2]=parseInt(pruefungDatum[2].split(' ')[0]);}for(var j=1;j<pruefungenValues.length;j++){if(typeof this.state.aktiveFilter[j]!=\"undefined\"&&this.state.aktiveFilter[j]!=pruefungenValues[j]){filteredOut=true;}if(pruefungenValues[j]==null){pruefungenValues[j]=\"\";}if(pruefungenValues[j].toString().toLowerCase().match(this.state.searchItem.toLocaleLowerCase())){containsSearch=true;}}pruefungenInfos1[0]=\"test\";if(!filteredOut&&containsSearch){if(typeof pruefungenInfos1[(pruefungDatum[1]-1)*31+pruefungDatum[2]]===\"undefined\"){pruefungenInfos1[(pruefungDatum[1]-1)*31+pruefungDatum[2]]=[];}if(!pruefungenInfos1[(pruefungDatum[1]-1)*31+pruefungDatum[2]].includes([parseInt(pruefungDatum[0]),pruefungenValues[3]])){pruefungenInfos1[(pruefungDatum[1]-1)*31+pruefungDatum[2]].push([parseInt(pruefungDatum[0]),pruefungenValues[3]]);}//console.log((pruefungDatum[1]-1)*31 + pruefungDatum[2]);\n}}}}pruefungenInfos1[0]=\"test\";pruefungenInfos1[1]=[2022,\"yay\"];//console.log(pruefungenInfos1[0]);\nthis.state.pruefungenInfos=pruefungenInfos1;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"table\",{id:\"month\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"prev\",onClick:function onClick(){_this4.state.calendar=_this4.prevMonth(_this4.state.pruefungenInfos,_this4.state.date)[0];updateState(_this4.state.aktiveFilter,_this4.state.searchItem);},children:\"\\u276E\"}),/*#__PURE__*/_jsx(\"td\",{id:\"cur_month\",children:\"A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"next\",onClick:function onClick(){_this4.state.calendar=_this4.nextMonth(_this4.state.pruefungenInfos,_this4.state.date)[0];updateState(_this4.state.aktiveFilter,_this4.state.searchItem);},children:\"\\u276F\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{id:\"cur_year\",children:/*#__PURE__*/_jsx(\"p\",{children:\"2022\"})}),/*#__PURE__*/_jsx(\"td\",{})]})]})}),/*#__PURE__*/_jsxs(\"table\",{id:\"calendar_table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Mo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Di\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mi\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Do\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fr\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"So\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{id:\"days\",children:this.state.calendar})]}),this.state.showPopup?/*#__PURE__*/_jsx(KalenderPopup,{name:this.state.infoName,closePopup:this.togglePopup.bind(this)}):null]});}}]);return KalenderContent;}(React.Component);export{KalenderContent as default};","map":{"version":3,"sources":["C:/Users/Malte/Desktop/Uni/WT2/Koelender git/koelender/frontend/src/components/kalender/KalenderContent.jsx"],"names":["React","renderCalendar","updateState","KalenderPopup","KalenderContent","state","error","isLoaded","pruefungen","aktiveFilter","pruefungPopup","searchItem","pruefungenInfos","calendar","date","infoName","bind","infos","month","getMonth","lastDay","Date","getFullYear","getDate","setDate","firstDayIndex","getDay","lastMonthDays","months","document","querySelector","innerHTML","days","i","week","event","x","push","y","j","togglePopup","length","setMonth","name","setState","showPopup","fetch","method","headers","then","response","json","result","message","pruefungenHeader","pruefungenInfos1","pruefungenKeys","Object","keys","textTransform","pruefungenValues","values","filteredOut","containsSearch","pruefungDatum","split","parseInt","toString","toLowerCase","match","toLocaleLowerCase","includes","prevMonth","nextMonth","Component"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport { renderCalendar } from '../../js/kalender';\r\n//import {prevMonth, nextMonth, renderCalendar} from './KalenderDays';\r\nimport { updateState } from './Kalender';\r\nimport KalenderPopup from './KalenderPopup';\r\n\r\n\r\n\r\n\r\nexport default class KalenderContent extends React.Component{\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            error:null,\r\n            isLoaded:true,\r\n            pruefungen: [],\r\n            aktiveFilter: [],\r\n            pruefungPopup: false,\r\n            searchItem: '',\r\n            pruefungenInfos: [],\r\n            calendar: [],\r\n            date: \"\",\r\n            infoName:\"\"\r\n        };\r\n        updateState = updateState.bind(this);\r\n        //updateState = () => {updateState(); renderCalendar(this.state.pruefungenInfos, this.state.date)}\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    renderCalendar(infos, date) {\r\n\r\n        //console.log(\"function renderCalendar started\");\r\n        //console.log(typeof(infos));\r\n        //console.log(infos[1]);\r\n    \r\n        const month = date.getMonth();\r\n        const lastDay = new Date(date.getFullYear(), date.getMonth()+1,0).getDate();\r\n    \r\n        date.setDate(1);\r\n        const firstDayIndex = date.getDay();\r\n        const lastMonthDays = new Date(date.getFullYear(), date.getMonth(),0).getDate();\r\n    \r\n        const months = [\r\n            \"Januar\",\r\n            \"Februar\",\r\n            \"MÃ¤rz\",\r\n            \"April\",\r\n            \"Mai\",\r\n            \"Juni\",\r\n            \"Juli\",\r\n            \"August\",\r\n            \"September\",\r\n            \"Oktober\",\r\n            \"November\",\r\n            \"Dezember\"\r\n        ];\r\n    \r\n        document.querySelector(\"#cur_month\").innerHTML \r\n        = months[month];\r\n    \r\n        document.querySelector(\"#cur_year\").innerHTML \r\n        = \"<p>\" + date.getFullYear() + \"</p>\";\r\n    \r\n        let days = [];\r\n    \r\n        let i = 1;\r\n        let week = [];\r\n        let event = [];\r\n    \r\n    \r\n        for(let x=firstDayIndex-1; x!==0; x--) {\r\n            \r\n            if (x===-1) {\r\n                x=6;\r\n            }\r\n            week.push( <td id=\"other_month\" class=\"day\">\r\n                    <div id=\"date\">{lastMonthDays-x+1}</div>\r\n                    <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + lastMonthDays-x+1 + \"m\" + date.getMonth()-1}>  </div>\r\n                </td>);\r\n            i++;\r\n        }\r\n    \r\n        \r\n    \r\n        for(let y=1; y<=lastDay;y++) {\r\n            \r\n            \r\n            if (i%7 === 1) {\r\n                days.push(<tr>{week}</tr>);\r\n                week = [];\r\n            }\r\n            if(typeof(infos[date.getMonth()*31+y]) !== \"undefined\") {\r\n                for(let j = 0; j<infos[date.getMonth()*31+y].length; j++)\r\n                if (infos[date.getMonth()*31+y][j][0] === date.getFullYear()) {\r\n                    \r\n                    event.push(<div onClick={()=>{this.togglePopup(infos[date.getMonth()*31+y][j][1])}} >{infos[date.getMonth()*31+y][j][1]}</div>);\r\n                    \r\n                }\r\n                else {\r\n                    event = [];\r\n                }\r\n            }\r\n            else {\r\n                event = [];\r\n            }\r\n            if(y===new Date().getDate() && date.getMonth()===new Date().getMonth() && date.getFullYear() === new Date().getFullYear()) {\r\n                \r\n                week.push( <td id=\"today\" class=\"day\">\r\n                        <div id=\"date\">{y}</div>\r\n                        <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()}> {event} </div>\r\n                    </td>);\r\n            }\r\n            else {\r\n                week.push( <td class=\"day\">\r\n                        <div id=\"date\">{y}</div>\r\n                        <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()}> {event} </div>\r\n                    </td>);\r\n            }\r\n            event = [];\r\n            i++;\r\n        }\r\n        \r\n        for(let y=1; !(i%7 === 1);y++) {\r\n            \r\n            week.push( <td id=\"other_month\" class=\"day\">\r\n                    <div id=\"date\">{y}</div>\r\n                    <div id=\"content\" class = {\"y\" + date.getFullYear() + \"d\" + y + \"m\" + date.getMonth()+1}>  </div>\r\n                </td>);\r\n            i++;\r\n        }\r\n        days.push( <tr id = \"oops\">{week}</tr>);\r\n    \r\n        //console.log(typeof(days));\r\n        return([days, date]);\r\n        \r\n        //monthDays.innerHTML = days;\r\n    \r\n    }\r\n    \r\n    prevMonth(infos, date){\r\n        //console.log(date.getMonth());\r\n        date.setMonth(date.getMonth()-1);\r\n        return this.renderCalendar(infos, date);\r\n    }\r\n    \r\n    nextMonth(infos, date){\r\n        date.setMonth(date.getMonth()+1);\r\n        return this.renderCalendar(infos, date);\r\n    }\r\n    \r\n\r\n\r\n\r\n\r\n\r\n    \r\n\r\n    togglePopup(name) {\r\n        this.setState({\r\n            infoName: name,\r\n            showPopup: !this.state.showPopup\r\n        });\r\n    }\r\n    componentDidUpdate() {\r\n        this.setState({\r\n            calendar: this.renderCalendar(this.state.pruefungenInfos, this.state.date)[0]\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        //console.log(typeof(this.state.pruefungenInfos));\r\n        //console.log(this.state.pruefungenInfos[0]);\r\n        if (this.state.date === \"\") { this.state.date = new Date();}\r\n        fetch(\"http://localhost:8000/api/liste/\",{\r\n            method:'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        \r\n        .then(\r\n            (result) => {\r\n                this.setState({\r\n                    isLoaded: true,\r\n                    pruefungen: result,\r\n                    \r\n                    calendar: this.renderCalendar(this.state.pruefungenInfos, this.state.date)[0]\r\n                    \r\n                });\r\n            },\r\n            (error) => {\r\n                this.setState({\r\n                    isLoaded: true,\r\n                    error\r\n                });\r\n            }\r\n        );\r\n            \r\n    }\r\n\r\n    render() {\r\n\r\n\r\n       const { error, isLoaded, pruefungen} = this.state;\r\n        \r\n        if(error) {return <div>Error: {error.message}</div>}\r\n        else if(!isLoaded) {return <div>Loading...</div>}\r\n\r\n        else {\r\n\r\n            var pruefungenHeader = [];\r\n            var pruefungenInfos1 = [];\r\n\r\n            if(pruefungen[0]){\r\n                var pruefungenKeys = Object.keys(pruefungen[0]);\r\n\r\n                for(let i = 1; i<pruefungenKeys.length; i++){\r\n                    \r\n                        pruefungenHeader.push(\r\n                        <td style = {{textTransform: \"capitalize\"}} \r\n                            id = {pruefungenKeys[i]+'_col_head'}>\r\n                                <b>{pruefungenKeys[i]}</b>\r\n                        </td>);\r\n                    \r\n                                    \r\n                }\r\n\r\n                for(let i = 0; i<pruefungen.length; i++) {\r\n                    \r\n                    let pruefungenValues = Object.values(pruefungen[i]);\r\n                    let filteredOut = false;\r\n                    let containsSearch = false\r\n\r\n                    \r\n\r\n                    if (!(pruefungenValues[5] == null)) {\r\n\r\n                        let pruefungDatum = pruefungenValues[5].split('-');\r\n                        pruefungDatum[1] = parseInt(pruefungDatum[1]);\r\n                        if (typeof pruefungDatum[2] === 'string') {\r\n                            pruefungDatum[2] = parseInt(pruefungDatum[2].split(' ')[0]);\r\n                        }\r\n                        \r\n                        for(let j = 1; j<pruefungenValues.length; j++){\r\n                                                \r\n                            if(typeof(this.state.aktiveFilter[j])!=\"undefined\"&&this.state.aktiveFilter[j]!=pruefungenValues[j]){\r\n                                filteredOut = true;\r\n                            }\r\n                            if(pruefungenValues[j]==null){\r\n                                pruefungenValues[j]=\"\"\r\n                            }\r\n                            if(pruefungenValues[j].toString().toLowerCase().match(this.state.searchItem.toLocaleLowerCase())){\r\n                                containsSearch = true;\r\n                            }\r\n                        }\r\n                        pruefungenInfos1[0] = \"test\";\r\n                        if(!filteredOut&&containsSearch) {\r\n                            if (typeof(pruefungenInfos1[(pruefungDatum[1]-1)*31 + pruefungDatum[2]]) === \"undefined\") {\r\n                                pruefungenInfos1[(pruefungDatum[1]-1)*31 + pruefungDatum[2]] = [];\r\n                            }\r\n                            if (!pruefungenInfos1[(pruefungDatum[1]-1)*31 + pruefungDatum[2]].includes([parseInt(pruefungDatum[0]), pruefungenValues[3]])){\r\n                                pruefungenInfos1[(pruefungDatum[1]-1)*31 + pruefungDatum[2]].push([parseInt(pruefungDatum[0]), pruefungenValues[3]]);\r\n                            }\r\n                            //console.log((pruefungDatum[1]-1)*31 + pruefungDatum[2]);\r\n                        }\r\n                    }   \r\n                }\r\n            }  \r\n            pruefungenInfos1[0] = \"test\";\r\n            pruefungenInfos1[1] = [2022, \"yay\"];\r\n            //console.log(pruefungenInfos1[0]);\r\n            this.state.pruefungenInfos = pruefungenInfos1;\r\n        }\r\n\r\n        \r\n\r\n    \r\n        return(\r\n            <>\r\n            <table id = \"month\">\r\n                <tbody>\r\n                    <tr>\r\n                        <td className=\"prev\" onClick={()=>{\r\n                            this.state.calendar = this.prevMonth(this.state.pruefungenInfos, this.state.date)[0]; \r\n                            updateState(this.state.aktiveFilter, this.state.searchItem);\r\n                            \r\n                            }}>\r\n                        {'\\u276E'}\r\n                        </td>\r\n                        \r\n                        <td id = \"cur_month\">\r\n                            A\r\n                        </td>\r\n                        \r\n                        <td className=\"next\" onClick={()=>{\r\n                            this.state.calendar = this.nextMonth(this.state.pruefungenInfos, this.state.date)[0]; \r\n                            updateState(this.state.aktiveFilter, this.state.searchItem);\r\n                            }}>\r\n                            {'\\u276F'}\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td></td>\r\n                        <td id = \"cur_year\">\r\n                            <p>2022</p>\r\n                        </td>\r\n                        <td></td>\r\n                        \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <table id = \"calendar_table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Mo</th>\r\n                        <th>Di</th>\r\n                        <th>Mi</th>\r\n                        <th>Do</th>\r\n                        <th>Fr</th>\r\n                        <th>Sa</th>\r\n                        <th>So</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody id = \"days\">\r\n                    {this.state.calendar}\r\n                    {/*Hier wird der Kalender generiert*/}\r\n                    {/*ToDo: FÃ¼llen der content divs mit Terminen*/}\r\n                </tbody>\r\n\r\n            </table>\r\n\r\n            {this.state.showPopup ? \r\n            <KalenderPopup\r\n                name={this.state.infoName}\r\n                closePopup={this.togglePopup.bind(this)}\r\n            />\r\n            : null\r\n            }\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}